XPathJS=(function(){var A,t,o,b,u,D,c,q,G,x,y,j=[],d="http://www.w3.org/XML/1998/namespace",E="http://www.w3.org/2000/xmlns/",p="http://www.w3.org/1999/xhtml",s,F,B,C,h,g,z=function(I){return I.ownerDocument},n=function(J){var I=[],K=function(L,N){var O,M,P=[];for(M=0;M<L.length;M++){O=L.item(M);if(false!==arrayIndexOf(O.nodeType,N)){P.push(O)}}return P};switch(J.nodeType){case 1:I=K(J.childNodes,supportedChildNodeTypes=[1,3,4,7,8]);break;case 9:I=K(J.childNodes,supportedChildNodeTypes=[1,7,8]);break;case 2:case 3:case 4:case 7:case 8:case 13:break;default:throw new Error("Internal Error: nodeChildren - unsupported node type: "+J.nodeType);break}return I},l=function(L){var J,K,I=[];J=n(L);for(K=0;K<J.length;K++){I.push(J[K]);I.push.apply(I,l(J[K]))}return I},f=function(J){var I;switch(J.nodeType){case 1:case 3:case 4:case 7:case 8:case 9:return J.parentNode;break;case 2:if(J.ownerElement){return J.ownerElement}I=nodeAttributeSearch(J.ownerDocument,true,function(K,L){if(L===J){return true}});return I;break;case 13:return J.ownerElement;break;default:throw new Error("Internal Error: nodeParent - node type not supported: "+J.type);break}},a=function(K){var J,I=[];while(J=f(K)){I.push(J);K=J}return I},k=function(I){return H(I,"nextSibling")},m=function(I){return H(I,"previousSibling")},H=function(L,K){var J,I=[];while(J=L[K]){switch(J.nodeType){case 1:case 3:case 4:case 7:case 8:case 9:I.push(J);break;default:break}L=J}return I},r=function(M){var I=[],K,L,N,J;K=a(M);K.unshift(M);for(L=0;L<K.length;L++){N=k(K[L]);for(J=0;J<N.length;J++){I.push(N[J]);I.push.apply(I,l(N[J]))}}return I},e=function(M){var I=[],K,L,N,J;K=a(M);K.unshift(M);for(L=0;L<K.length;L++){N=m(K[L]);for(J=0;J<N.length;J++){I.push.apply(I,l(N[J]).reverse());I.push(N[J])}}return I},z=function(I){switch(I.nodeType){case 9:return I;default:return I.ownerDocument}};nodeAttribute=function(K){var I=[],J;if(K.nodeType===1){for(J=0;J<K.attributes.length;J++){if(!K.attributes[J].specified){continue}if(false===isNamespaceAttributeNode(K.attributes[J])){I.push(K.attributes[J])}}}return I},nodeNamespace=function(M,N){var I=(N||[]),K,J,L;if(M.nodeType===1){if(M.ownerDocument.documentElement===M&&typeof M.ownerDocument.namespaces==="object"){for(K=M.ownerDocument.namespaces.length-1;K>=0;K--){L=M.ownerDocument.namespaces.item(K);insertNamespaceIfNotDeclared.call(this,I,L.name,L.urn,M)}}for(K=M.attributes.length-1;K>=0;K--){if(!M.attributes[K].specified){continue}if(false===(J=isNamespaceAttributeNode(M.attributes[K]))){continue}if(J.length===1){insertNamespaceIfNotDeclared.call(this,I,"",M.attributes[K].nodeValue,M);continue}insertNamespaceIfNotDeclared.call(this,I,J[1],M.attributes[K].nodeValue,M)}nodeNamespace.call(this,M.parentNode,I);if(N===undefined){insertNamespaceIfNotDeclared.call(this,I,"xml",d,M);if(I[0]&&I[0].prefix===""&&I[0].namespaceURI===""){I.shift()}}if(N===undefined){for(K=0;K<I.length;K++){if(I[K].ownerElement!==M){I[K]=createNamespaceNode(I[K].prefix,I[K].nodeValue,M)}}}}return I},insertNamespaceIfNotDeclared=function(N,M,L,K){var I,J;if(!this.opts["case-sensitive"]){M=M.toLowerCase()}for(I=0;I<N.length;I++){if(N[I].prefix===M){return false}}J=createNamespaceNode(M,L,K);if(M===""&&L!==null){N.unshift(J)}else{N.push(J)}return true},isNamespaceAttributeNode=function(J){var I=J.nodeName.split(":");if(I[0]==="xmlns"){return I}return false},nodeIdAttribute=function(M,L){var P,N,O,K,Q,I,J;if(M.nodeType===1){O=(!L)?nodeAttribute(M):[L];K=nodeNamespace.call(this,M);for(P=0;P<O.length;P++){I=O[P].nodeName.split(":");if(I.length===1){I[1]=I[0];I[0]=""}Q=null;for(N=0;N<K.length;N++){if(K[N].prefix===I[0]){Q=K[N].namespaceURI;break}}if(Q===null){Q=""}if(this.opts["unique-ids"][Q]===I[1]){return O[P]}}}return null},nodeAttributeSearch=function(J,M,N){var L,I,P,K,O=[];P=J.getElementsByTagName("*");for(L=0;L<P.length;L++){K=P.item(L);if(K.nodeType!=1){continue}for(I=0;I<K.attributes.length;I++){if(!K.attributes[I].specified){continue}if(N(K,K.attributes[I])===true){if(M){return K}else{O.push(K);break}}}}if(M){return null}else{return O}},nodeExpandedName=function(K){var I,L,J,M;switch(K.nodeType){case 1:if(typeof K.scopeName!="undefined"){M={prefix:(K.scopeName=="HTML")?"":K.scopeName,name:K.nodeName}}else{I=K.nodeName.split(":");if(I.length==1){M={prefix:"",name:I[0]}}else{M={prefix:I[0],name:I[1]}}}if(!this.opts["case-sensitive"]){M.prefix=M.prefix.toLowerCase();M.name=M.name.toLowerCase()}L=nodeNamespace.call(this,K);for(J=0;J<L.length;J++){if(L[J].prefix===M.prefix){M.ns=L[J].namespaceURI;return M}}if(M.prefix===""){M.ns=null;return M}throw new Error('Internal Error: nodeExpandedName - Failed to expand namespace prefix "'+M.prefix+'" on element: '+K.nodeName);break;case 2:I=K.nodeName.split(":");if(I.length==1){return{prefix:"",ns:null,name:I[0]}}M={prefix:I[0],name:I[1]};if(!this.opts["case-sensitive"]){M.prefix=M.prefix.toLowerCase();M.name=M.name.toLowerCase()}L=nodeNamespace.call(this,f(K));for(J=0;J<L.length;J++){if(L[J].prefix===M.prefix){M.ns=L[J].namespaceURI;return M}}throw new Error('Internal Error: nodeExpandedName - Failed to expand namespace prefix "'+M.prefix+'" on attribute: '+K.nodeName);break;case 13:return{prefix:null,ns:null,name:((!this.opts["case-sensitive"])?K.prefix:K.prefix.toLowerCase())};break;case 7:return{prefix:null,ns:null,name:((!this.opts["case-sensitive"])?K.target:K.target.toLowerCase())};break;default:return false;break}},nodeStringValue=function(K){var J,I,L="";switch(K.nodeType){case 9:case 1:I=q(new y(K,1,1,{},{},{}),{type:"step",args:["descendant",{type:"nodeType",args:["text",[]]}]});I.sortDocumentOrder();for(J=0;J<I.value.length;J++){L+=I.value[J].data}return L;break;case 2:return K.nodeValue;break;case 13:return K.namespaceURI;break;case 7:case 8:case 3:case 4:return K.data;break;default:throw new Error("Internal Error: nodeStringValue does not support node type: "+K.nodeType);break}},createError=function(L,I,K){var J=new Error(K);J.name=I;J.code=L;return J},arrayIndexOf=function(K,J){var I=J.length;while(I--){if(J[I]===K){return I}}return false},compareOperator=function(L,O,J,K){var N,M,P,I,Q;if(L instanceof h){if(O instanceof h){I=O.stringValues();P=L.stringValues();for(N=0;N<P.length;N++){for(M=0;M<I.length;M++){Q=compareOperator(P[N],I[M],J,K);if(Q.toBoolean()){return Q}}}}else{if(O instanceof C){P=L.stringValues();for(N=0;N<P.length;N++){Q=compareOperator(new C(P[N].toNumber()),O,J,K);if(Q.toBoolean()){return Q}}}else{if(O instanceof DateType||(O instanceof B&&O.isDateString())){if(O instanceof B){O=new DateType(O)}P=L.stringValues();for(N=0;N<P.length;N++){Q=compareOperator(new DateType(P[N].toDate()),O,J,K);if(Q.toBoolean()){return Q}}}else{if(O instanceof B){P=L.stringValues();for(N=0;N<P.length;N++){Q=compareOperator(P[N],O,J,K);if(Q.toBoolean()){return Q}}}else{return compareOperator(new F(L.toBoolean()),O,J,K)}}}}}else{if(O instanceof h){if(L instanceof C){I=O.stringValues();for(N=0;N<I.length;N++){Q=compareOperator(L,new C(I[N].toNumber()),J,K);if(Q.toBoolean()){return Q}}}else{if(L instanceof DateType||(L instanceof B&&L.isDateString())){if(L instanceof B){L=new DateType(L)}I=O.stringValues();for(N=0;N<I.length;N++){Q=compareOperator(L,new DateType(I[N].toDate()),J,K);if(Q.toBoolean()){return Q}}}else{if(L instanceof B){I=O.stringValues();for(N=0;N<I.length;N++){Q=compareOperator(L,I[N],J,K);if(Q.toBoolean()){return Q}}}else{return compareOperator(L,new F(O.toBoolean()),J,K)}}}}else{switch(J){case"=":case"!=":if(L instanceof F||O instanceof F){return new F(K(L.toBoolean(),O.toBoolean()))}else{if(L instanceof C||O instanceof C){return new F(K(L.toNumber(),O.toNumber()))}}return new F(K(L.toString(),O.toString()));break;default:return new F(K(L.toNumber(),O.toNumber()));break}}}return new F(false)},getComparableNode=function(I){switch(I.nodeType){case 2:case 3:case 4:case 7:case 8:return f(I);break;case 1:case 9:return I;break;case 13:default:throw new Error("Internal Error: getComparableNode - Node type not supported: "+I.nodeType);break}},compareDocumentPosition=function(K,J){var I,L,M;if(K.nodeType==13&&J.nodeType==13&&K.ownerElement==J.ownerElement){if(K===J){return 0}L=nodeNamespace.call(g,K.ownerElement);for(M=0;M<L.length;M++){if(L[M]===K){I=4;break}else{if(L[M]===J){I=2;break}}}}else{if(K.nodeType==13){K=K.ownerElement}if(J.nodeType==13){J=J.ownerElement}I=compareDocumentPositionNoNamespace(K,J)}return I},compareDocumentPositionNoNamespace=function(L,K){var J,M,I,N,O,P=function(X,Q,V,U,Y,R,S,T,W){if(Y===0||(Y&R)===R){return T+R}else{if((Y&S)===S){return W}else{return Y}}};if(L.compareDocumentPosition){return L.compareDocumentPosition(K)}if(L===K){return 0}J=getComparableNode(L);M=getComparableNode(K);if(J.nodeType===9){if(M.nodeType===9){if(J!==M){return 1}else{I=0}}else{if(J!==M.ownerDocument){return 1}else{I=4+16}}}else{if(M.nodeType===9){if(M!==J.ownerDocument){return 1}else{I=2+8}}else{if(J.ownerDocument!==M.ownerDocument){return 1}else{if(!J.contains||typeof J.sourceIndex==="undefined"||!M.contains||typeof M.sourceIndex==="undefined"){throw new Error('Cannot compare elements. Neither "compareDocumentPosition" nor "contains" available.')}else{I=(J!=M&&J.contains(M)&&16)+(J!=M&&M.contains(J)&&8)+(J.sourceIndex>=0&&M.sourceIndex>=0?(J.sourceIndex<M.sourceIndex&&4)+(J.sourceIndex>M.sourceIndex&&2):1)+0}}}}if(L===J&&K===M){return I}else{if(L===J){return P(L,J,K,M,I,16,8,4,2)}else{if(K===M){return P(K,M,L,J,I,8,16,2,4)}else{if((I&16)===16){return 4}else{if((I&8)===8){return 2}else{if(I===0){for(N=0;N<J.attributes.length;N++){O=J.attributes[N];if(!O.specified){continue}if(O===K){return 2}else{if(O===L){return 4}}}throw new Error("Internal Error: compareDocumentPosition failed to sort attributes.")}else{return I}}}}}}throw new Error("Internal Error: compareDocumentPosition failed to sort nodes.")},nodeSupported=function(I){if(!I){throw createError(9,"NOT_SUPPORTED_ERR","Context node was not supplied.")}else{if(I.nodeType!=9&&I.nodeType!=1&&I.nodeType!=2&&I.nodeType!=3&&I.nodeType!=4&&I.nodeType!=8&&I.nodeType!=7&&I.nodeType!=13){throw createError(9,"NOT_SUPPORTED_ERR","The supplied node type is not supported. (nodeType: "+I.nodeType+")")}else{if(I.nodeType==2&&!I.specified){throw createError(9,"NOT_SUPPORTED_ERR","The supplied node is a non-specified attribute node. Only specified attribute nodes are supported.")}}}},createNamespaceNode=function(M,L,K){var I,J;for(I=0;I<j.length;I++){J=j[I];if(J.prefix===M&&J.nodeValue===L&&J.ownerElement===K){return J}}J=new D(M,L,K);j.push(J);return J};s=function(K,J,I){this.value=K;this.type=J;this.supports=I};s.prototype={value:null,type:null,supports:[],toBoolean:function(){throw new Error('Unable to convert "'+this.type+'" to "boolean".')},toString:function(){throw new Error('Unable to convert "'+this.type+'" to "string".')},toNumber:function(){throw new Error('Unable to convert "'+this.type+'" to "number".')},toNodeSet:function(){throw new Error('Unable to convert "'+this.type+'" to "node-set".')},toDate:function(){throw new Error('Unable to convert "'+this.type+'" to "date".')},canConvertTo:function(I){return false!==arrayIndexOf(I,this.supports)}};F=function(I){s.call(this,I,"boolean",["boolean","string","number","date"])};F.prototype=new s;F.constructor=F;F.prototype.toBoolean=function(){return this.value};F.prototype.toString=function(){return(this.value===true)?"true":"false"};F.prototype.toNumber=function(){return(this.value)?1:0};F.prototype.toDate=function(){return null};h=function(J,I){s.call(this,J,"node-set",["boolean","string","number","node-set","date"]);this.docOrder=(I||"unsorted")};h.prototype=new s;h.constructor=h;h.prototype.toBoolean=function(){return(this.value.length>0)?true:false};h.prototype.toString=function(){if(this.value.length<1){return""}this.sortDocumentOrder();return nodeStringValue(this.value[0])};h.prototype.toNumber=function(){return(new B(this.toString())).toNumber()};h.prototype.toNodeSet=function(){return this.value};h.prototype.toDate=function(){return(new B(this.toString())).toDate()};h.prototype.sortDocumentOrder=function(){switch(this.docOrder){case"document-order":break;case"reverse-document-order":this.value.reverse();break;default:this.value.sort(function(K,J){var I=compareDocumentPosition(K,J);if((I&4)==4){return -1}else{if((I&2)==2){return 1}else{throw new Error("NodeSetType.sortDocumentOrder - unexpected compare result: "+I)}}});break}this.docOrder="document-order"};h.prototype.sortReverseDocumentOrder=function(){switch(this.docOrder){case"document-order":this.value.reverse();break;case"reverse-document-order":break;default:this.sortDocumentOrder();this.value.reverse();break}this.docOrder="reverse-document-order"};h.prototype.append=function(J){var M,L=0,K=0,I;if(!J instanceof h){throw new Error("NodeSetType can be passed into NodeSetType.append method")}this.sortDocumentOrder();J.sortDocumentOrder();while(L<this.value.length&&K<J.value.length){I=compareDocumentPosition(this.value[L],J.value[K]);if(I==0){K++}else{if((I&4)==4){L++}else{if((I&2)==2){this.value.splice(L,0,J.value[K]);L++;K++}else{throw new Error("Internal Error: NodeSetType.append - unable to sort nodes. (result: "+I+")")}}}}for(;K<J.value.length;K++){this.value.push(J.value[K])}this.docOrder="document-order"};h.prototype.stringValues=function(){var J,K,I=[];for(J=0;J<this.value.length;J++){K=new B(nodeStringValue(this.value[J]));if(K.isDateString()){K=new DateType(K.value)}I.push(K)}return I};B=function(I){s.call(this,I,"string",["boolean","string","number","date"])};B.prototype=new s;B.constructor=B;B.prototype.toBoolean=function(){return(this.value.length>0)?true:false};B.prototype.toString=function(){return this.value};B.prototype.toNumber=function(){var I;if(this.isDateString(this.value)){return new DateType(this.value).toNumber()}I=this.value.match(/^[ \t\r\n]*(-?[0-9]+(?:[.][0-9]*)?)[ \t\r\n]*$/);if(I!==null){return parseFloat(I[1])}I=this.value.match(/^[ \t\r\n]*(-?[.][0-9]+)[ \t\r\n]*$/);if(I!==null){return parseFloat(I[1])}return Number.NaN};B.prototype.toDate=function(){return new Date(this.value)};B.prototype.isDateString=function(){if(!isNaN(this.value)){return false}if(isNaN(Date.parse(this.value))){return false}console.debug("found string value that passes check for datestringiness: "+this.value);return true};C=function(I){s.call(this,I,"number",["boolean","string","number","date"])};C.prototype=new s;C.constructor=C;C.prototype.toBoolean=function(){return(this.value!==0&&!isNaN(this.value))?true:false};C.prototype.toString=function(){return this.value.toString()};C.prototype.toNumber=function(){return this.value};C.prototype.toDate=function(){return new Date(this.value*(1000*60*60*24))};DateType=function(I){s.call(this,I,"date",["date","string","number","boolean"])};DateType.prototype=new s;DateType.constructor=DateType;DateType.prototype.toDate=function(){return new Date(this.value)};DateType.prototype.toString=function(){return new Date(this.value).toUTCString()};DateType.prototype.toNumber=function(){return(new Date(this.value).getTime())/(1000*60*60*24)};DateType.prototype.toBoolean=function(){return(!isNaN(new Date(this.value).getTime()))};A=function(K,J){var I;this.code=K;switch(this.code){case A.INVALID_EXPRESSION_ERR:this.name="INVALID_EXPRESSION_ERR";break;case A.TYPE_ERR:this.name="TYPE_ERR";break;default:I=new Error("Unsupported XPathException code: "+this.code);I.name="XPathExceptionInternalError";throw I;break}this.message=(J||"")};A.prototype.toString=function(){return'XPathException: "'+this.message+'", code: "'+this.code+'", name: "'+this.name+'"'};A.INVALID_EXPRESSION_ERR=51;A.TYPE_ERR=52;t=function(J){var K,I,L;for(K in J){L=false;for(I in this.opts){if(K===I){this.opts[K]=J[K];L=true;break}}if(L){continue}throw new Error("Unsupported option: "+K)}this.opts["unique-ids"][d]="id";this.opts["unique-ids"][p]="id"};t.prototype={opts:{"unique-ids":{},"case-sensitive":false},createExpression:function(P,O){var I,M,K,J={},N;try{I=XPathJS._parser.parse(P)}catch(L){M="The expression is not a legal expression.";if(L instanceof XPathJS._parser.SyntaxError){M+=" (line: "+L.line+", character: "+L.column+")"}else{M+=" ("+L.message+")"}throw new A(A.INVALID_EXPRESSION_ERR,M)}if(I.nsPrefixes.length>0){if(typeof O!="object"||typeof O.lookupNamespaceURI==="undefined"){throw new A(A.INVALID_EXPRESSION_ERR,"No namespace resolver provided or lookupNamespaceURI function not supported.")}for(K=0;K<I.nsPrefixes.length;K++){N=I.nsPrefixes[K];J[N]=O.lookupNamespaceURI(N);if(J[N]===null){throw createError(14,"NAMESPACE_ERR",'Undefined namespace prefix "'+N+'" in the context of the given resolver.')}}}return new o(I,J,this.opts)},createNSResolver:function(I){return new b(I)},evaluate:function(M,J,L,K,I){var M=this.createExpression(M,L);return M.evaluate(J,K,I)}};o=function(J,I,K){this.parsedExpression=J;this.namespaceMapping=I;this.opts=K||{}};o.prototype={parsedExpression:null,namespaceMapping:null,opts:{},evaluate:function(J,L,I){var K;g=this;nodeSupported(J);K=new y(J,1,1,{},x,this.namespaceMapping,this.opts);return u.factory(K,L,q(K,this.parsedExpression.tree))}};y=function(M,I,L,O,N,K,J){this.node=M;this.pos=I;this.size=L;this.vars=O;this.fns=N;this.nsMap=K;this.opts=J||{}};y.prototype={node:null,pos:null,size:null,vars:null,fns:null,nsMap:null,opts:null,clone:function(K,I,J){return new y(K||this.node,(typeof I!="undefined")?I:this.pos,(typeof J!="undefined")?J:this.size,this.vars,this.fns,this.nsMap,this.opts)}};b=function(I){nodeSupported(I);this.node=I};b.prototype={node:null,lookupNamespaceURI:function(M){var L=this.node,I,K,J;switch(M){case"xml":return d;break;case"xmlns":return E;break;default:switch(this.node.nodeType){case 9:L=L.documentElement;break;case 1:break;default:L=f(L);break}if(L!=null&&L.nodeType==1){if(""==M){K=L.getAttribute("xmlns");if(K!==null){return K}}else{if(L.ownerDocument.documentElement===L&&typeof L.ownerDocument.namespaces==="object"){for(I=0;I<L.ownerDocument.namespaces.length;I++){K=L.ownerDocument.namespaces.item(I);if(K.name==M){return K.urn}}}else{for(I=0;I<L.attributes.length;I++){if(!L.attributes[I].specified){continue}if("xmlns:"+M==L.attributes[I].nodeName){return L.attributes[I].nodeValue}}}}if(L.ownerDocument.documentElement!==L&&L.parentNode){J=this.node;this.node=L.parentNode;K=this.lookupNamespaceURI(M);this.node=J;return K}}return null;break}}};G={"/":function(O,M){var N,L,I,J,K,P;if(O===null){I=new h([z(this.node)],"document-order")}else{I=q(this,O);if(!I instanceof h){throw new Error("Left side of path separator (/) must be of node-set type. (type: "+I.type+")")}}if(M===null){K=I}else{K=new h([],"document-order");for(L=0;L<I.value.length;L++){P=this.clone(I.value[L]);J=q(P,M);if(!J instanceof h){throw new Error("Right side of path separator (/) must be of node-set type. (type: "+J.type+")")}K.append(J)}}return K},step:function(M,N){var O,Q,L,I,K,P,J;switch(M){case"child":O=new h(n(this.node),"document-order");break;case"descendant":O=new h(l(this.node),"document-order");break;case"parent":L=f(this.node);O=new h((!L)?[]:[L],"document-order");break;case"ancestor":O=new h(a(this.node),"reverse-document-order");break;case"following-sibling":O=new h(k(this.node),"document-order");break;case"preceding-sibling":O=new h(m(this.node),"reverse-document-order");break;case"following":O=new h(r(this.node),"document-order");break;case"preceding":O=new h(e(this.node),"reverse-document-order");break;case"attribute":O=new h(nodeAttribute(this.node),"document-order");break;case"namespace":O=new h(nodeNamespace.call(this,this.node),"document-order");break;case"self":O=new h([this.node],"document-order");break;case"descendant-or-self":I=l(this.node);I.unshift(this.node);O=new h(I,"document-order");break;case"ancestor-or-self":I=a(this.node);I.unshift(this.node);O=new h(I,"reverse-document-order");break;default:throw new Error("Axis type not supported: "+M);break}switch(N.type){case"nodeType":if(N.args[0]=="node"){break}for(Q=O.value.length-1;Q>=0;Q--){switch(N.args[0]){case"text":if(O.value[Q].nodeType!=3&&O.value[Q].nodeType!=4){O.value.splice(Q,1)}break;case"comment":if(O.value[Q].nodeType!=8){O.value.splice(Q,1)}break;case"processing-instruction":if(O.value[Q].nodeType!=7||(N.args[1].length>0&&q(this,N.args[1][0])!=O.value[Q].nodeName)){O.value.splice(Q,1)}break}}break;case"name":K=q(this,N);switch(M){case"attribute":P=2;break;case"namespace":P=13;break;default:P=1;break}for(Q=O.value.length-1;Q>=0;Q--){if(O.value[Q].nodeType!=P){O.value.splice(Q,1);continue}if(K.ns===null&&K.name===null){continue}J=nodeExpandedName.call(this,O.value[Q]);if(J===false||J.ns!==K.ns){O.value.splice(Q,1);continue}if(K.name!==null&&J.name.toLowerCase()!=K.name.toLowerCase()){O.value.splice(Q,1)}}break;default:throw new Error("NodeTest type not supported in step: "+N.type);break}return O},predicate:function(J,P,K){var N,O,Q,M,L,I;N=q(this,P);if(!N instanceof h){throw new Error('Expected "node-set", got: '+N.type)}switch(J){case"ancestor":case"ancestor-or-self":case"preceding":case"preceding-sibling":N.sortReverseDocumentOrder();break;default:N.sortDocumentOrder();break}for(M=0;M<K.length;M++){for(O=0,L=1,I=N.value.length;O<N.value.length;L++){Q=q(this.clone(N.value[O],L,I),K[M]);if(Q instanceof C){if(Q.value!=L){N.value.splice(O,1);continue}}else{if(!Q.toBoolean()){N.value.splice(O,1);continue}}O++}}return N},"function":function(I,Q){var K,R=[],S=function(T){return((T.ns!==null)?"{"+T.ns+"}":"{}")+T.name},P=function(T){var V,U=[],W;for(V=0;V<T.length;V++){W=(T[V].t===undefined)?"object":T[V].t;if(T[V].r!==false){if(T[V].rep===true){W+="+"}}else{if(T[V].rep===true){W+="*"}else{W+="?"}}U.push(W)}return"("+U.join(", ")+")"},L,O,M=0,N=[],J;K=q(this,I);if(K.ns===null){K.ns=""}if(!this.fns[K.ns]||!this.fns[K.ns][K.name]){throw new Error('Function "'+S(K)+'" does not exist.')}L=this.fns[K.ns][K.name];if(!L.args){L.args=[]}for(O=0,M=0;O<L.args.length;M++,O++){if(Q[M]===undefined){if(L.args[O].r!==false){throw new Error('Function "'+S(K)+'" expects '+P(L.args)+".")}}else{N.push((L.args[O].t===undefined)?"object":L.args[O].t)}if(L.args[O].rep===true){for(;M<Q.length;M++){N.push((L.args[O].t===undefined)?"object":L.args[O].t)}break}}if(N.length<Q.length){throw new Error('Function "'+S(K)+'" expects '+P(L.args)+".")}for(O=0;O<Q.length;O++){J=q(this,Q[O]);if(N[O]!=="object"&&!J.canConvertTo(N[O])){throw new Error('Function "'+S(K)+'" expects '+P(L.args)+'.Cannot convert "'+J.type+'" to "'+N[O]+'".')}R.push(J)}result=L.fn.apply(this,R);if(!result instanceof s){throw new Error('Function "'+S(K)+'" did not return a value that inherits from BaseType.')}else{if(L.ret!=="object"&&!result.canConvertTo(L.ret)){throw new Error('Function "'+S(K)+'" return "'+result.type+'" type that cannot be converted to "'+L.ret+'".')}}return result},"|":function(J,I){J=q(this,J);I=q(this,I);if(typeof J=="undefined"||typeof I=="undefined"||!J instanceof h||!I instanceof h){throw new Error('Unable to perform union on non-"node-set" types.')}J.append(I);return J},or:function(J,I){if(q(this,J).toBoolean()){return new F(true)}return new F(q(this,I).toBoolean())},and:function(J,I){if(q(this,J).toBoolean()){return new F(q(this,I).toBoolean())}return new F(false)},"=":function(J,I){return compareOperator.call(this,q(this,J),q(this,I),"=",function(L,K){return L==K})},"!=":function(J,I){return compareOperator.call(this,q(this,J),q(this,I),"!=",function(L,K){return L!=K})},"<=":function(J,I){return compareOperator.call(this,q(this,J),q(this,I),"<=",function(L,K){return L<=K})},"<":function(J,I){return compareOperator.call(this,q(this,J),q(this,I),"<",function(L,K){return L<K})},">=":function(J,I){return compareOperator.call(this,q(this,J),q(this,I),">=",function(L,K){return L>=K})},">":function(J,I){return compareOperator.call(this,q(this,J),q(this,I),">",function(L,K){return L>K})},"+":function(J,I){return new C(q(this,J).toNumber()+q(this,I).toNumber())},"-":function(J,I){return new C(q(this,J).toNumber()-q(this,I).toNumber())},div:function(J,I){return new C(q(this,J).toNumber()/q(this,I).toNumber())},mod:function(J,I){return new C(q(this,J).toNumber()%q(this,I).toNumber())},"*":function(J,I){return new C(q(this,J).toNumber()*q(this,I).toNumber())},string:function(I){return new B(I)},number:function(I){return new C(I)},"$":function(I){throw new Error("TODO: Not implemented.16")},name:function(K,I){var J=null;if(K!==null){J=this.nsMap[K];if(!J){throw new Error('Namespace prefix "'+K+'" is not mapped to a namespace.')}}return{ns:J,name:I}}};x={"":{last:{fn:function(){return new C(this.size)},ret:"number"},position:{fn:function(){return new C(this.pos)},ret:"number"},count:{fn:function(I){return new C(I.toNodeSet().length)},args:[{t:"node-set"}],ret:"number"},id:{fn:function(M){var K=this,I=[],O,N,L,J=[],Q,P=function(S){var R,T=S.split(/[\u0020\u0009\u000D\u000A]+/);for(R=T.length-1;R>=0;R--){if(T[R].length==0){T.splice(R,1)}}return T};if(M instanceof h){for(O=0;O<M.value.length;O++){I.push.apply(I,P(nodeStringValue(M.value[O])))}}else{M=M.toString();I=P(M)}for(O=I.length-1;O>=0;O--){for(N=O-1;N>=0;N--){if(I[O]==I[N]&&O!=N){I.splice(O,1);break}}}for(O=0;O<I.length;O++){L=z(this.node).getElementById(I[O]);if(L){if(nodeIdAttribute.call(this,L)){J.push(L);continue}}nodeAttributeSearch(z(this.node),true,function(R,T){var S=nodeIdAttribute.call(K,R,T);if(S&&S.nodeValue==I[O]){J.push(R);return true}})}return new h(J)},args:[{}],ret:"node-set"},"local-name":{fn:function(J){var K,I="";if(arguments.length==0){J=new h([this.node])}if(J.toNodeSet().length>0){J.sortDocumentOrder();K=nodeExpandedName.call(this,J.value[0]);if(K!==false){I=K.name}}return new B(I)},args:[{t:"node-set",r:false}],ret:"string"},"namespace-uri":{fn:function(I){var K,J="";if(arguments.length==0){I=new h([this.node])}if(I.toNodeSet().length>0){I.sortDocumentOrder();K=nodeExpandedName.call(this,I.value[0]);if(K!==false&&K.ns!==null){J=K.ns}}return new B(J)},args:[{t:"node-set",r:false}],ret:"string"},name:{fn:function(I){var K,J="";if(arguments.length==0){I=new h([this.node])}if(I.toNodeSet().length>0){I.sortDocumentOrder();K=nodeExpandedName.call(this,I.value[0]);if(K!==false){J=(K.prefix&&K.prefix.length>0)?K.prefix+":"+K.name:K.name}}return new B(J)},args:[{t:"node-set",r:false}],ret:"string"},string:{fn:function(I){if(arguments.length==0){I=new h([this.node],"document-order")}return new B(I.toString())},args:[{t:"object",r:false}],ret:"string"},"starts-with":{fn:function(I,J){return new F(I.toString().substr(0,(J=J.toString()).length)==J)},args:[{t:"string"},{t:"string"}],ret:"string"},contains:{fn:function(I,J){return new F(I.toString().indexOf(J=J.toString())!=-1)},args:[{t:"string"},{t:"string"}],ret:"string"},"substring-before":{fn:function(I,J){I=I.toString();J=I.indexOf(J.toString());return new B(J==-1?"":I.substr(0,J))},args:[{t:"string"},{t:"string"}],ret:"string"},"substring-after":{fn:function(I,J){var K;I=I.toString();J=J.toString();K=I.indexOf(J);return new B(K==-1?"":I.substr(K+J.length))},args:[{t:"string"},{t:"string"}],ret:"string"},substring:{fn:function(J,K,I){J=J.toString();K=Math.round(K.toNumber())-1;return new B(isNaN(K)?"":((arguments.length==2)?J.substring(K<0?0:K):J.substring(K<0?0:K,K+Math.round(I.toNumber()))))},args:[{t:"string"},{t:"number"},{t:"number",r:false}],ret:"string"},"string-length":{fn:function(I){I=(arguments.length==0)?nodeStringValue(this.node):I.toString();return new C(I.length)},args:[{t:"string",r:false}],ret:"number"},"normalize-space":{fn:function(I){I=(arguments.length==0)?nodeStringValue(this.node):I.toString();return new B(I.replace(/^[\u0020\u0009\u000D\u000A]+/,"").replace(/[\u0020\u0009\u000D\u000A]+$/,"").replace(/[\u0020\u0009\u000D\u000A]+/g," "))},args:[{t:"string",r:false}],ret:"string"},translate:{fn:function(O,N,M){var J="",L,K,I;O=O.toString();N=N.toString();M=M.toString();for(L=0;L<O.length;L++){if((K=N.indexOf(I=O.charAt(L)))==-1||(I=M.charAt(K))){J+=I}}return new B(J)},args:[{t:"string"},{t:"string"},{t:"string"}],ret:"string"},"boolean":{fn:function(I){return new F(I.toBoolean())},args:[{r:true}],ret:"boolean"},not:{fn:function(I){return new F(!I.toBoolean())},args:[{t:"boolean"}],ret:"boolean"},"true":{fn:function(){return new F(true)},ret:"boolean"},"false":{fn:function(){return new F(false)},ret:"boolean"},lang:{fn:function(O){var I=this.node,M,P,R,Q=O.toString().toLowerCase().split("-"),J,N,L,K;for(;I.nodeType!=9;I=f(I)){M=nodeAttribute(I);for(N=0;N<M.length;N++){P=M[N].nodeName.split(":");if(P.length===1){P[1]=P[0];P[0]=""}if(P[1]=="lang"){R=M[N].nodeValue.toLowerCase().split("-");if(R.length<Q.length){continue}K=true;for(L=0;L<Q.length;L++){if(Q[L]!=R[L]){K=false;break}}if(K){J=nodeNamespace.call(this,I);for(L=0;L<J.length;L++){if(J[L].prefix==P[0]&&J[L].nodeValue==d){return new F(true)}}}}}}return new F(false)},args:[{t:"string"}],ret:"boolean"},number:{fn:function(I){if(arguments.length==0){I=new h([this.node],"document-order")}return new C(I.toNumber())},args:[{t:"object",r:false}],ret:"number"},sum:{fn:function(I){var J,K=0;I=I.toNodeSet();for(J=0;J<I.length;J++){K+=(new B(nodeStringValue(I[J]))).toNumber()}return new C(K)},args:[{t:"node-set"}],ret:"number"},floor:{fn:function(I){return new C(Math.floor(I))},args:[{t:"number"}],ret:"number"},ceiling:{fn:function(I){return new C(Math.ceil(I))},args:[{t:"number"}],ret:"number"},sum_jr:{fn:function(I){var J,K;sum=0;I=I.toNodeSet();for(J=0;J<I.length;J++){K=(nodeStringValue(I[J])=="")?"0":nodeStringValue(I[J]);sum+=(new B(K)).toNumber()}return new C(sum)},args:[{t:"node-set"}],ret:"number"},concat:{fn:function(K){var I,L,J="";for(I=0;I<arguments.length;I++){if(arguments[I] instanceof h){L=arguments[I].stringValues().join("")}else{L=arguments[I].toString()}J+=L}return new B(J)},args:[{t:"object",r:false,rep:true}],ret:"string"},round:{fn:function(J,I){I=Math.round(I)||0;return new C(Math.round(J*Math.pow(10,I))/Math.pow(10,I))},args:[{t:"number"},{t:"number",r:false}],ret:"number"},selected:{fn:function(K,L){var J,I;L=L.toString().trim();I=K.toString();return new F((" "+I+" ").indexOf(" "+L+" ")!=-1)},args:[{t:"object"},{t:"string"}],ret:"boolean"},"selected-at":{fn:function(L,I){var M,J,K;I=Math.round(I.toNumber());M=L.toString();J=M.split(" ");K=(I>=0&&I<J.length)?J[I]:"";return new B(K)},args:[{t:"object"},{t:"number"}],ret:"string"},"count-selected":{fn:function(J){var I=[];J=J.toNodeSet();if(J.length>0){I=nodeStringValue(J[0]).trim().split(" ");return(I.length==1&&I[0]==="")?new C(0):new C(I.length)}return new C(0)},args:[{t:"node-set"}],ret:"number"},checklist:{fn:function(M,I,J){var L,K,N=0;M=M.toNumber();I=I.toNumber();for(L=2;L<arguments.length;L++){if(arguments[L] instanceof h){for(K=0;K<arguments[L].stringValues().length;K++){if(arguments[L].stringValues()[K].toBoolean()===true){N++}}}else{if(arguments[L].toBoolean()===true){N++}}}return new F((M<0||N>=M)&&(I<0||N<=I))},args:[{t:"number"},{t:"number"},{t:"object"},{t:"object",r:false,rep:true}],ret:"boolean"},"weighted-checklist":{fn:function(J,M,I,N){var L,K,Q=[],O=[],P=0;J=J.toNumber();M=M.toNumber();for(L=2;L<arguments.length;L=L+2){v=arguments[L];w=arguments[L+1];if(v&&w){if(v instanceof h){Q=Q.concat(v.stringValues())}else{Q.push(v)}if(w instanceof h){O=O.concat(w.stringValues())}else{O.push(w)}}}for(L=0;L<Q.length;L++){if(Q[L].toBoolean()===true){P+=O[L].toNumber()}}return new F((J<0||P>=J)&&(M<0||P<=M))},args:[{t:"number"},{t:"number"},{t:"object"},{t:"object"},{t:"object",r:false,rep:true}],ret:"boolean"},"boolean-from-string":{fn:function(I){return new F(I.toString().toLowerCase()==="true"||String(I)==="1")},args:[{t:"string"}],ret:"boolean"},"if":{fn:function(K,J,I){return(K.toBoolean()?J:I)},args:[{t:"object"},{t:"object"},{t:"object"}],ret:"object"},date:{fn:function(I){return new DateType(I.toDate())},args:[{t:"object"}],ret:"string"},today:{fn:function(){var I=new Date();return new DateType(new Date(I.getFullYear(),I.getMonth(),I.getDate()))},ret:"string"},now:{fn:function(){return new DateType(new Date())},ret:"string"},regex:{fn:function(L,K){var J,I;J=L.toString();I=new RegExp(K);return new F(I.test(J))},args:[{t:"object"},{t:"string"}],ret:"boolean"},uuid:{fn:function(){var I="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(L){var K=Math.random()*16|0,J=L=="x"?K:(K&3|8);return J.toString(16)});return new B(I)},ret:"string"},"int":{fn:function(I){return new C(parseInt(I))},args:[{t:"number"}],ret:"number"},substr:{fn:function(J,K,I){J=J.toString();length=J.length;K=Math.round(K.toNumber());I=(I)?Math.round(I.toNumber()):length;return new B(isNaN(K)?"":J.substring(K<0?length+K:K,I<0?length+I:I))},args:[{t:"string"},{t:"number"},{t:"number",r:false}],ret:"string"},random:{fn:function(){return new C(Math.random().toFixed(15))},ret:"number"},min:{fn:function(I){var K,J,L;I=I.toNodeSet();for(K=0;K<I.length;K++){L=new B(nodeStringValue(I[K]));if(L&&L.toString()!==""){J=(J)?Math.min(J,L.toNumber()):L.toNumber()}}return new C(J)},args:[{t:"node-set"}],ret:"number"},max:{fn:function(J){var K,I,L;J=J.toNodeSet();for(K=0;K<J.length;K++){L=new B(nodeStringValue(J[K]));if(L&&L.toString()!==""){I=(I)?Math.max(I,L.toNumber()):L.toNumber()}}return new C(I)},args:[{t:"node-set"}],ret:"number"},join:{fn:function(K,L){var J,I=[];for(J=1;J<arguments.length;J++){if(arguments[J] instanceof h){I=I.concat(arguments[J].stringValues())}else{I.push(arguments[J].toString())}}value=I[0]||"";for(J=1;J<I.length;J++){value+=K.toString()+I[J]}return new B(value)},args:[{t:"string"},{t:"object",r:false,rep:true}],ret:"string"},coalesce:{fn:function(J,I){return(J.toString().length>0)?J:I},args:[{t:"object"},{t:"object"}],ret:"string"},"format-date":{fn:function(J,O){var N,L,J=new DateType(J),K=J.toDate(),I=O.toString(),M=function(R,P){var S=R.toString(),Q=P-S.length;for(L=0;L<Q;L++){S="0"+S}return S};if(!J.toBoolean()){return new B(K.toString())}props={Y:K.getFullYear(),y:K.getFullYear().toString().substring(2,4),m:M((K.getMonth()+1),2),n:K.getMonth()+1,b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][K.getMonth()],d:M(K.getDate(),2),e:K.getDate(),H:M(K.getHours(),2),h:K.getHours(),M:M(K.getMinutes(),2),S:M(K.getSeconds(),2),"3":M(K.getMilliseconds(),3),a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][K.getDay()]};for(prop in props){I=I.replace("%"+prop,props[prop])}return new B(I)},args:[{t:"date"},{t:"string"}],ret:"string"},pow:{fn:function(J,I){return new C(Math.pow(J,I))},args:[{t:"number"},{t:"number"}],ret:"number"}}};q=function(J,I){if(typeof G[I.type]!="function"){throw new Error("Internal Error: Expression type does not exist: "+I.type)}return G[I.type].apply(J,I.args)};u=function(I,J,K){switch(J){case u.NUMBER_TYPE:this.resultType=u.NUMBER_TYPE;this.numberValue=K.toNumber();break;case u.STRING_TYPE:this.resultType=u.STRING_TYPE;this.stringValue=K.toString();break;case u.BOOLEAN_TYPE:this.resultType=u.BOOLEAN_TYPE;this.booleanValue=K.toBoolean();break;case u.UNORDERED_NODE_ITERATOR_TYPE:case u.ORDERED_NODE_ITERATOR_TYPE:case u.UNORDERED_NODE_SNAPSHOT_TYPE:case u.ORDERED_NODE_SNAPSHOT_TYPE:case u.ANY_UNORDERED_NODE_TYPE:case u.FIRST_ORDERED_NODE_TYPE:if(!K instanceof h){throw new Error('Expected result of type "node-set", got: "'+K.type+'"')}this.resultType=J;switch(J){case u.UNORDERED_NODE_ITERATOR_TYPE:case u.UNORDERED_NODE_SNAPSHOT_TYPE:this._value=K.toNodeSet();this.snapshotLength=this._value.length;break;case u.ORDERED_NODE_ITERATOR_TYPE:case u.ORDERED_NODE_SNAPSHOT_TYPE:K.sortDocumentOrder();this._value=K.toNodeSet();this.snapshotLength=this._value.length;break;case u.ANY_UNORDERED_NODE_TYPE:K=K.toNodeSet();this.singleNodeValue=(K.length)?K[0]:null;break;case u.FIRST_ORDERED_NODE_TYPE:K.sortDocumentOrder();K=K.toNodeSet();this.singleNodeValue=(K.length)?K[0]:null;break;default:throw new A(A.TYPE_ERR,"XPath result type not supported. (type: "+J+")");break}break;default:throw new A(A.TYPE_ERR,"XPath result type not supported. (type: "+J+")");break}};u.factory=function(J,K,L){var I;if(K!==u.ANY_TYPE){return new u(J,K,L)}if(L instanceof h){I=new u(J,u.UNORDERED_NODE_ITERATOR_TYPE,L)}else{if(L instanceof C){I=new u(J,u.NUMBER_TYPE,L)}else{if(L instanceof F){I=new u(J,u.BOOLEAN_TYPE,L)}else{if(L instanceof B){I=new u(J,u.STRING_TYPE,L)}else{throw new A(A.TYPE_ERR,"Internal Error: Unsupported value type: "+typeof L)}}}}return I};u.prototype={resultType:null,numberValue:null,stringValue:null,booleanValue:null,singleNodeValue:null,invalidIteratorState:null,snapshotLength:null,_iteratorIndex:0,iterateNext:function(){if(this.resultType!=u.UNORDERED_NODE_ITERATOR_TYPE&&this.resultType!=u.ORDERED_NODE_ITERATOR_TYPE){throw new A(A.TYPE_ERR,"iterateNext() method may only be used with results of type UNORDERED_NODE_ITERATOR_TYPE or ORDERED_NODE_ITERATOR_TYPE")}if(this._iteratorIndex<this._value.length){return this._value[this._iteratorIndex++]}return null},snapshotItem:function(I){if(this.resultType!=u.UNORDERED_NODE_SNAPSHOT_TYPE&&this.resultType!=u.ORDERED_NODE_SNAPSHOT_TYPE){throw new A(A.TYPE_ERR,"snapshotItem() method may only be used with results of type UNORDERED_NODE_SNAPSHOT_TYPE or ORDERED_NODE_SNAPSHOT_TYPE")}return this._value[I]}};u.ANY_TYPE=0;u.NUMBER_TYPE=1;u.STRING_TYPE=2;u.BOOLEAN_TYPE=3;u.UNORDERED_NODE_ITERATOR_TYPE=4;u.ORDERED_NODE_ITERATOR_TYPE=5;u.UNORDERED_NODE_SNAPSHOT_TYPE=6;u.ORDERED_NODE_SNAPSHOT_TYPE=7;u.ANY_UNORDERED_NODE_TYPE=8;u.FIRST_ORDERED_NODE_TYPE=9;D=function(K,I,J){if(J.nodeType!=1){throw new Error("Internal Error: XPathNamespace owner element must be an Element node.")}this.ownerElement=J;this.ownerDocument=J.ownerDocument;this.nodeName="#namespace";this.prefix=K;this.localName=K;this.nodeType=D.XPATH_NAMESPACE_NODE;this.namespaceURI=I;this.nodeValue=I};D.XPATH_NAMESPACE_NODE=13;c={XPathException:A,XPathEvaluator:t,XPathNSResolver:b,XPathExpression:o,XPathResult:u,XPathNamespace:D,getCurrentDomLevel3XPathBindings:function(){return{window:{XPathException:window.XPathException,XPathExpression:window.XPathExpression,XPathNSResolver:window.XPathNSResolver,XPathResult:window.XPathResult,XPathNamespace:window.XPathNamespace},document:{createExpression:document.createExpression,createNSResolver:document.createNSResolver,evaluate:document.evaluate}}},createDomLevel3XPathBindings:function(I){var J=new t(I);return{window:{XPathException:A,XPathExpression:o,XPathNSResolver:b,XPathResult:u,XPathNamespace:D},document:{createExpression:function(){return J.createExpression.apply(J,arguments)},createNSResolver:function(){return J.createNSResolver.apply(J,arguments)},evaluate:function(){return J.evaluate.apply(J,arguments)}}}},bindDomLevel3XPath:function(L){var J=(L||c.createDomLevel3XPathBindings()),K=c.getCurrentDomLevel3XPathBindings(),I;for(I in J.window){window[I]=J.window[I]}for(I in J.document){document[I]=J.document[I]}return K}};return c})();XPathJS._parser=(function(){function b(c){return'"'+c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var a={parse:function(f,q){var e={XPath:H,LocationPath:o,AbsoluteLocationPath:ai,RelativeLocationPath:F,Step:C,AxisSpecifier:Y,AxisName:c,NodeTest:p,Predicate:L,AbbreviatedAbsoluteLocationPath:am,AbbreviatedStep:T,AbbreviatedAxisSpecifier:ae,Expr:N,PrimaryExpr:M,FunctionCall:af,UnionExpr:ah,PathExpr:z,FilterExpr:r,OrExpr:U,AndExpr:n,EqualityExpr:ak,RelationalExpr:y,AdditiveExpr:k,MultiplicativeExpr:d,UnaryExpr:D,Literal:ar,Number:ao,Digits:aj,MultiplyOperator:ag,FunctionName:m,VariableReference:Q,NameTest:V,NodeType:aq,S:W,_:R,QName:ad,PrefixedName:B,UnprefixedName:x,NCName:K,NameStartChar:E,NameChar:t,Name:g};if(q!==undefined){if(e[q]===undefined){throw new Error("Invalid rule name: "+b(q)+".")}}else{q="XPath"}var O=0;var ab=0;var h=0;var s=[];function al(au,ay,aw){var at=au;var ax=aw-au.length;for(var av=0;av<ax;av++){at=ay+at}return at}function G(av){var au=av.charCodeAt(0);var at;var aw;if(au<=255){at="x";aw=2}else{at="u";aw=4}return"\\"+at+al(au.toString(16).toUpperCase(),"0",aw)}function u(at){if(O<h){return}if(O>h){h=O;s=[]}s.push(at)}function H(){var aw,au,at;var ax,av;ax=O;av=O;aw=R();if(aw!==null){au=N();if(au!==null){at=R();if(at!==null){aw=[aw,au,at]}else{aw=null;O=av}}else{aw=null;O=av}}else{aw=null;O=av}if(aw!==null){aw=(function(az,ay){return{tree:ay,nsPrefixes:P}})(ax,aw[1])}if(aw===null){O=ax}return aw}function o(){var at;at=F();if(at===null){at=ai()}return at}function ai(){var ax,av,at;var ay,aw,au;ax=am();if(ax===null){ay=O;aw=O;if(f.charCodeAt(O)===47){ax="/";O++}else{ax=null;if(ab===0){u('"/"')}}if(ax!==null){au=O;av=R();if(av!==null){at=F();if(at!==null){av=[av,at]}else{av=null;O=au}}else{av=null;O=au}av=av!==null?av:"";if(av!==null){ax=[ax,av]}else{ax=null;O=aw}}else{ax=null;O=aw}if(ax!==null){ax=(function(aA,az){return{type:"/",args:[null,(az)?az[1]:null]}})(ay,ax[1])}if(ax===null){O=ay}}return ax}function F(){var ay,ax,aw,av,au,at;var aB,aA,az;aB=O;aA=O;ay=C();if(ay!==null){ax=[];az=O;aw=R();if(aw!==null){if(f.substr(O,2)==="//"){av="//";O+=2}else{av=null;if(ab===0){u('"//"')}}if(av===null){if(f.charCodeAt(O)===47){av="/";O++}else{av=null;if(ab===0){u('"/"')}}}if(av!==null){au=R();if(au!==null){at=C();if(at!==null){aw=[aw,av,au,at]}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}while(aw!==null){ax.push(aw);az=O;aw=R();if(aw!==null){if(f.substr(O,2)==="//"){av="//";O+=2}else{av=null;if(ab===0){u('"//"')}}if(av===null){if(f.charCodeAt(O)===47){av="/";O++}else{av=null;if(ab===0){u('"/"')}}}if(av!==null){au=R();if(au!==null){at=C();if(at!==null){aw=[aw,av,au,at]}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}}if(ax!==null){ay=[ay,ax]}else{ay=null;O=aA}}else{ay=null;O=aA}if(ay!==null){ay=(function(aF,aD,aE){var aC;for(aC=0;aC<aE.length;aC++){aD=ap(aE[aC][1],aD,aE[aC][3])}return aD})(aB,ay[0],ay[1])}if(ay===null){O=aB}return ay}function C(){var ay,ax,aw,av,au,at;var aB,aA,az;aB=O;aA=O;ay=Y();if(ay!==null){ax=R();if(ax!==null){aw=p();if(aw!==null){av=[];az=O;au=R();if(au!==null){at=L();if(at!==null){au=[au,at]}else{au=null;O=az}}else{au=null;O=az}while(au!==null){av.push(au);az=O;au=R();if(au!==null){at=L();if(at!==null){au=[au,at]}else{au=null;O=az}}else{au=null;O=az}}if(av!==null){ay=[ay,ax,aw,av]}else{ay=null;O=aA}}else{ay=null;O=aA}}else{ay=null;O=aA}}else{ay=null;O=aA}if(ay!==null){ay=(function(aF,aD,aE,aC){return j({type:"step",args:[aD,aE]},aD,aC,1)})(aB,ay[0],ay[2],ay[3])}if(ay===null){O=aB}if(ay===null){ay=T()}return ay}function Y(){var aw,au,at;var ax,av;ax=O;av=O;aw=c();if(aw!==null){au=R();if(au!==null){if(f.substr(O,2)==="::"){at="::";O+=2}else{at=null;if(ab===0){u('"::"')}}if(at!==null){aw=[aw,au,at]}else{aw=null;O=av}}else{aw=null;O=av}}else{aw=null;O=av}if(aw!==null){aw=(function(az,ay){return ay})(ax,aw[0])}if(aw===null){O=ax}if(aw===null){ax=O;aw=ae();if(aw!==null){aw=(function(az,ay){return(ay.length)?ay:"child"})(ax,aw)}if(aw===null){O=ax}}return aw}function c(){var at;if(f.substr(O,16)==="ancestor-or-self"){at="ancestor-or-self";O+=16}else{at=null;if(ab===0){u('"ancestor-or-self"')}}if(at===null){if(f.substr(O,8)==="ancestor"){at="ancestor";O+=8}else{at=null;if(ab===0){u('"ancestor"')}}if(at===null){if(f.substr(O,9)==="attribute"){at="attribute";O+=9}else{at=null;if(ab===0){u('"attribute"')}}if(at===null){if(f.substr(O,5)==="child"){at="child";O+=5}else{at=null;if(ab===0){u('"child"')}}if(at===null){if(f.substr(O,18)==="descendant-or-self"){at="descendant-or-self";O+=18}else{at=null;if(ab===0){u('"descendant-or-self"')}}if(at===null){if(f.substr(O,10)==="descendant"){at="descendant";O+=10}else{at=null;if(ab===0){u('"descendant"')}}if(at===null){if(f.substr(O,17)==="following-sibling"){at="following-sibling";O+=17}else{at=null;if(ab===0){u('"following-sibling"')}}if(at===null){if(f.substr(O,9)==="following"){at="following";O+=9}else{at=null;if(ab===0){u('"following"')}}if(at===null){if(f.substr(O,9)==="namespace"){at="namespace";O+=9}else{at=null;if(ab===0){u('"namespace"')}}if(at===null){if(f.substr(O,6)==="parent"){at="parent";O+=6}else{at=null;if(ab===0){u('"parent"')}}if(at===null){if(f.substr(O,17)==="preceding-sibling"){at="preceding-sibling";O+=17}else{at=null;if(ab===0){u('"preceding-sibling"')}}if(at===null){if(f.substr(O,9)==="preceding"){at="preceding";O+=9}else{at=null;if(ab===0){u('"preceding"')}}if(at===null){if(f.substr(O,4)==="self"){at="self";O+=4}else{at=null;if(ab===0){u('"self"')}}}}}}}}}}}}}}return at}function p(){var az,ay,ax,aw,av,au,at;var aB,aA;aB=O;aA=O;az=aq();if(az!==null){ay=R();if(ay!==null){if(f.charCodeAt(O)===40){ax="(";O++}else{ax=null;if(ab===0){u('"("')}}if(ax!==null){aw=R();if(aw!==null){if(f.charCodeAt(O)===41){av=")";O++}else{av=null;if(ab===0){u('")"')}}if(av!==null){az=[az,ay,ax,aw,av]}else{az=null;O=aA}}else{az=null;O=aA}}else{az=null;O=aA}}else{az=null;O=aA}}else{az=null;O=aA}if(az!==null){az=(function(aD,aC){return{type:"nodeType",args:[aC,[]]}})(aB,az[0])}if(az===null){O=aB}if(az===null){aB=O;aA=O;if(f.substr(O,22)==="processing-instruction"){az="processing-instruction";O+=22}else{az=null;if(ab===0){u('"processing-instruction"')}}if(az!==null){ay=R();if(ay!==null){if(f.charCodeAt(O)===40){ax="(";O++}else{ax=null;if(ab===0){u('"("')}}if(ax!==null){aw=R();if(aw!==null){av=ar();if(av!==null){au=R();if(au!==null){if(f.charCodeAt(O)===41){at=")";O++}else{at=null;if(ab===0){u('")"')}}if(at!==null){az=[az,ay,ax,aw,av,au,at]}else{az=null;O=aA}}else{az=null;O=aA}}else{az=null;O=aA}}else{az=null;O=aA}}else{az=null;O=aA}}else{az=null;O=aA}}else{az=null;O=aA}if(az!==null){az=(function(aE,aD,aC){return{type:"nodeType",args:[aD,[aC]]}})(aB,az[0],az[4])}if(az===null){O=aB}if(az===null){aB=O;az=V();if(az!==null){az=(function(aD,aC){return aC})(aB,az)}if(az===null){O=aB}}}return az}function L(){var ay,aw,av,au,at;var az,ax;az=O;ax=O;if(f.charCodeAt(O)===91){ay="[";O++}else{ay=null;if(ab===0){u('"["')}}if(ay!==null){aw=R();if(aw!==null){av=N();if(av!==null){au=R();if(au!==null){if(f.charCodeAt(O)===93){at="]";O++}else{at=null;if(ab===0){u('"]"')}}if(at!==null){ay=[ay,aw,av,au,at]}else{ay=null;O=ax}}else{ay=null;O=ax}}else{ay=null;O=ax}}else{ay=null;O=ax}}else{ay=null;O=ax}if(ay!==null){ay=(function(aB,aA){return aA})(az,ay[2])}if(ay===null){O=az}return ay}function am(){var aw,au,at;var ax,av;ax=O;av=O;if(f.substr(O,2)==="//"){aw="//";O+=2}else{aw=null;if(ab===0){u('"//"')}}if(aw!==null){au=R();if(au!==null){at=F();if(at!==null){aw=[aw,au,at]}else{aw=null;O=av}}else{aw=null;O=av}}else{aw=null;O=av}if(aw!==null){aw=(function(az,ay){return ap("//",null,ay)})(ax,aw[2])}if(aw===null){O=ax}return aw}function T(){var at;var au;au=O;if(f.substr(O,2)===".."){at="..";O+=2}else{at=null;if(ab===0){u('".."')}}if(at===null){if(f.charCodeAt(O)===46){at=".";O++}else{at=null;if(ab===0){u('"."')}}}if(at!==null){at=(function(ax,aw){var av={type:"step",args:["self",{type:"nodeType",args:["node",[]]}]};if(aw==".."){av.args[0]="parent"}return av})(au,at)}if(at===null){O=au}return at}function ae(){var at;var au;au=O;if(f.charCodeAt(O)===64){at="@";O++}else{at=null;if(ab===0){u('"@"')}}at=at!==null?at:"";if(at!==null){at=(function(aw,av){return(av)?"attribute":""})(au,at)}if(at===null){O=au}return at}function N(){var at;var au;au=O;at=U();if(at!==null){at=(function(aw,av){return av})(au,at)}if(at===null){O=au}return at}function M(){var ay,aw,av,au,at;var az,ax;az=O;ay=Q();if(ay!==null){ay=(function(aB,aA){return aA})(az,ay)}if(ay===null){O=az}if(ay===null){az=O;ax=O;if(f.charCodeAt(O)===40){ay="(";O++}else{ay=null;if(ab===0){u('"("')}}if(ay!==null){aw=R();if(aw!==null){av=N();if(av!==null){au=R();if(au!==null){if(f.charCodeAt(O)===41){at=")";O++}else{at=null;if(ab===0){u('")"')}}if(at!==null){ay=[ay,aw,av,au,at]}else{ay=null;O=ax}}else{ay=null;O=ax}}else{ay=null;O=ax}}else{ay=null;O=ax}}else{ay=null;O=ax}if(ay!==null){ay=(function(aB,aA){return aA})(az,ay[2])}if(ay===null){O=az}if(ay===null){az=O;ay=ar();if(ay!==null){ay=(function(aB,aA){return aA})(az,ay)}if(ay===null){O=az}if(ay===null){az=O;ay=ao();if(ay!==null){ay=(function(aA,aB){return aB})(az,ay)}if(ay===null){O=az}if(ay===null){ay=af()}}}}return ay}function af(){var aA,az,ay,ax,aw,av,au,at,aG,aF;var aE,aD,aC,aB;aE=O;aD=O;aA=m();if(aA!==null){az=R();if(az!==null){if(f.charCodeAt(O)===40){ay="(";O++}else{ay=null;if(ab===0){u('"("')}}if(ay!==null){aC=O;ax=R();if(ax!==null){aw=N();if(aw!==null){av=[];aB=O;au=R();if(au!==null){if(f.charCodeAt(O)===44){at=",";O++}else{at=null;if(ab===0){u('","')}}if(at!==null){aG=R();if(aG!==null){aF=N();if(aF!==null){au=[au,at,aG,aF]}else{au=null;O=aB}}else{au=null;O=aB}}else{au=null;O=aB}}else{au=null;O=aB}while(au!==null){av.push(au);aB=O;au=R();if(au!==null){if(f.charCodeAt(O)===44){at=",";O++}else{at=null;if(ab===0){u('","')}}if(at!==null){aG=R();if(aG!==null){aF=N();if(aF!==null){au=[au,at,aG,aF]}else{au=null;O=aB}}else{au=null;O=aB}}else{au=null;O=aB}}else{au=null;O=aB}}if(av!==null){ax=[ax,aw,av]}else{ax=null;O=aC}}else{ax=null;O=aC}}else{ax=null;O=aC}ax=ax!==null?ax:"";if(ax!==null){aw=R();if(aw!==null){if(f.charCodeAt(O)===41){av=")";O++}else{av=null;if(ab===0){u('")"')}}if(av!==null){aA=[aA,az,ay,ax,aw,av]}else{aA=null;O=aD}}else{aA=null;O=aD}}else{aA=null;O=aD}}else{aA=null;O=aD}}else{aA=null;O=aD}}else{aA=null;O=aD}if(aA!==null){aA=(function(aL,aJ,aH){var aK,aI=[];if(aH){aI.push(aH[1]);for(aK=0;aK<aH[2].length;aK++){aI.push(aH[2][aK][3])}}return{type:"function",args:[aJ,aI]}})(aE,aA[0],aA[3])}if(aA===null){O=aE}return aA}function ah(){var ay,ax,aw,av,au,at;var aB,aA,az;aB=O;aA=O;ay=z();if(ay!==null){ax=[];az=O;aw=R();if(aw!==null){if(f.charCodeAt(O)===124){av="|";O++}else{av=null;if(ab===0){u('"|"')}}if(av!==null){au=R();if(au!==null){at=z();if(at!==null){aw=[aw,av,au,at]}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}while(aw!==null){ax.push(aw);az=O;aw=R();if(aw!==null){if(f.charCodeAt(O)===124){av="|";O++}else{av=null;if(ab===0){u('"|"')}}if(av!==null){au=R();if(au!==null){at=z();if(at!==null){aw=[aw,av,au,at]}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}}if(ax!==null){ay=[ay,ax]}else{ay=null;O=aA}}else{ay=null;O=aA}if(ay!==null){ay=(function(aE,aC,aD){return an(aC,aD,1,3)})(aB,ay[0],ay[1])}if(ay===null){O=aB}return ay}function z(){var az,ax,av,au,at;var aA,ay,aw;aA=O;ay=O;az=r();if(az!==null){aw=O;ax=R();if(ax!==null){if(f.substr(O,2)==="//"){av="//";O+=2}else{av=null;if(ab===0){u('"//"')}}if(av===null){if(f.charCodeAt(O)===47){av="/";O++}else{av=null;if(ab===0){u('"/"')}}}if(av!==null){au=R();if(au!==null){at=F();if(at!==null){ax=[ax,av,au,at]}else{ax=null;O=aw}}else{ax=null;O=aw}}else{ax=null;O=aw}}else{ax=null;O=aw}ax=ax!==null?ax:"";if(ax!==null){az=[az,ax]}else{az=null;O=ay}}else{az=null;O=ay}if(az!==null){az=(function(aD,aC,aB){if(!aB){return aC}return ap(aB[1],aC,aB[3])})(aA,az[0],az[1])}if(az===null){O=aA}if(az===null){aA=O;az=o();if(az!==null){az=(function(aC,aB){return aB})(aA,az)}if(az===null){O=aA}}return az}function r(){var ay,aw,au,at;var az,ax,av;az=O;ax=O;ay=M();if(ay!==null){aw=[];av=O;au=R();if(au!==null){at=L();if(at!==null){au=[au,at]}else{au=null;O=av}}else{au=null;O=av}while(au!==null){aw.push(au);av=O;au=R();if(au!==null){at=L();if(at!==null){au=[au,at]}else{au=null;O=av}}else{au=null;O=av}}if(aw!==null){ay=[ay,aw]}else{ay=null;O=ax}}else{ay=null;O=ax}if(ay!==null){ay=(function(aC,aA,aB){return j(aA,"child",aB,1)})(az,ay[0],ay[1])}if(ay===null){O=az}return ay}function U(){var ay,ax,aw,av,au,at;var aB,aA,az;aB=O;aA=O;ay=n();if(ay!==null){ax=[];az=O;aw=R();if(aw!==null){if(f.substr(O,2)==="or"){av="or";O+=2}else{av=null;if(ab===0){u('"or"')}}if(av!==null){au=R();if(au!==null){at=n();if(at!==null){aw=[aw,av,au,at]}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}while(aw!==null){ax.push(aw);az=O;aw=R();if(aw!==null){if(f.substr(O,2)==="or"){av="or";O+=2}else{av=null;if(ab===0){u('"or"')}}if(av!==null){au=R();if(au!==null){at=n();if(at!==null){aw=[aw,av,au,at]}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}}if(ax!==null){ay=[ay,ax]}else{ay=null;O=aA}}else{ay=null;O=aA}if(ay!==null){ay=(function(aE,aC,aD){return an(aC,aD,1,3)})(aB,ay[0],ay[1])}if(ay===null){O=aB}return ay}function n(){var ay,ax,aw,av,au,at;var aB,aA,az;aB=O;aA=O;ay=ak();if(ay!==null){ax=[];az=O;aw=R();if(aw!==null){if(f.substr(O,3)==="and"){av="and";O+=3}else{av=null;if(ab===0){u('"and"')}}if(av!==null){au=R();if(au!==null){at=ak();if(at!==null){aw=[aw,av,au,at]}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}while(aw!==null){ax.push(aw);az=O;aw=R();if(aw!==null){if(f.substr(O,3)==="and"){av="and";O+=3}else{av=null;if(ab===0){u('"and"')}}if(av!==null){au=R();if(au!==null){at=ak();if(at!==null){aw=[aw,av,au,at]}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}}if(ax!==null){ay=[ay,ax]}else{ay=null;O=aA}}else{ay=null;O=aA}if(ay!==null){ay=(function(aE,aC,aD){return an(aC,aD,1,3)})(aB,ay[0],ay[1])}if(ay===null){O=aB}return ay}function ak(){var ay,ax,aw,av,au,at;var aB,aA,az;aB=O;aA=O;ay=y();if(ay!==null){ax=[];az=O;aw=R();if(aw!==null){if(f.charCodeAt(O)===61){av="=";O++}else{av=null;if(ab===0){u('"="')}}if(av===null){if(f.substr(O,2)==="!="){av="!=";O+=2}else{av=null;if(ab===0){u('"!="')}}}if(av!==null){au=R();if(au!==null){at=y();if(at!==null){aw=[aw,av,au,at]}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}while(aw!==null){ax.push(aw);az=O;aw=R();if(aw!==null){if(f.charCodeAt(O)===61){av="=";O++}else{av=null;if(ab===0){u('"="')}}if(av===null){if(f.substr(O,2)==="!="){av="!=";O+=2}else{av=null;if(ab===0){u('"!="')}}}if(av!==null){au=R();if(au!==null){at=y();if(at!==null){aw=[aw,av,au,at]}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}}if(ax!==null){ay=[ay,ax]}else{ay=null;O=aA}}else{ay=null;O=aA}if(ay!==null){ay=(function(aE,aC,aD){return an(aC,aD,1,3)})(aB,ay[0],ay[1])}if(ay===null){O=aB}return ay}function y(){var ay,ax,aw,av,au,at;var aB,aA,az;aB=O;aA=O;ay=k();if(ay!==null){ax=[];az=O;aw=R();if(aw!==null){if(f.substr(O,2)==="<="){av="<=";O+=2}else{av=null;if(ab===0){u('"<="')}}if(av===null){if(f.charCodeAt(O)===60){av="<";O++}else{av=null;if(ab===0){u('"<"')}}if(av===null){if(f.substr(O,2)===">="){av=">=";O+=2}else{av=null;if(ab===0){u('">="')}}if(av===null){if(f.charCodeAt(O)===62){av=">";O++}else{av=null;if(ab===0){u('">"')}}}}}if(av!==null){au=R();if(au!==null){at=k();if(at!==null){aw=[aw,av,au,at]}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}while(aw!==null){ax.push(aw);az=O;aw=R();if(aw!==null){if(f.substr(O,2)==="<="){av="<=";O+=2}else{av=null;if(ab===0){u('"<="')}}if(av===null){if(f.charCodeAt(O)===60){av="<";O++}else{av=null;if(ab===0){u('"<"')}}if(av===null){if(f.substr(O,2)===">="){av=">=";O+=2}else{av=null;if(ab===0){u('">="')}}if(av===null){if(f.charCodeAt(O)===62){av=">";O++}else{av=null;if(ab===0){u('">"')}}}}}if(av!==null){au=R();if(au!==null){at=k();if(at!==null){aw=[aw,av,au,at]}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}}if(ax!==null){ay=[ay,ax]}else{ay=null;O=aA}}else{ay=null;O=aA}if(ay!==null){ay=(function(aE,aC,aD){return an(aC,aD,1,3)})(aB,ay[0],ay[1])}if(ay===null){O=aB}return ay}function k(){var ay,ax,aw,av,au,at;var aB,aA,az;aB=O;aA=O;ay=d();if(ay!==null){ax=[];az=O;aw=R();if(aw!==null){if(f.charCodeAt(O)===43){av="+";O++}else{av=null;if(ab===0){u('"+"')}}if(av===null){if(f.charCodeAt(O)===45){av="-";O++}else{av=null;if(ab===0){u('"-"')}}}if(av!==null){au=R();if(au!==null){at=d();if(at!==null){aw=[aw,av,au,at]}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}while(aw!==null){ax.push(aw);az=O;aw=R();if(aw!==null){if(f.charCodeAt(O)===43){av="+";O++}else{av=null;if(ab===0){u('"+"')}}if(av===null){if(f.charCodeAt(O)===45){av="-";O++}else{av=null;if(ab===0){u('"-"')}}}if(av!==null){au=R();if(au!==null){at=d();if(at!==null){aw=[aw,av,au,at]}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}}if(ax!==null){ay=[ay,ax]}else{ay=null;O=aA}}else{ay=null;O=aA}if(ay!==null){ay=(function(aE,aC,aD){return an(aC,aD,1,3)})(aB,ay[0],ay[1])}if(ay===null){O=aB}return ay}function d(){var ay,ax,aw,av,au,at;var aB,aA,az;aB=O;aA=O;ay=D();if(ay!==null){ax=[];az=O;aw=R();if(aw!==null){av=ag();if(av===null){if(f.substr(O,3)==="div"){av="div";O+=3}else{av=null;if(ab===0){u('"div"')}}if(av===null){if(f.substr(O,3)==="mod"){av="mod";O+=3}else{av=null;if(ab===0){u('"mod"')}}}}if(av!==null){au=R();if(au!==null){at=D();if(at!==null){aw=[aw,av,au,at]}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}while(aw!==null){ax.push(aw);az=O;aw=R();if(aw!==null){av=ag();if(av===null){if(f.substr(O,3)==="div"){av="div";O+=3}else{av=null;if(ab===0){u('"div"')}}if(av===null){if(f.substr(O,3)==="mod"){av="mod";O+=3}else{av=null;if(ab===0){u('"mod"')}}}}if(av!==null){au=R();if(au!==null){at=D();if(at!==null){aw=[aw,av,au,at]}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}}else{aw=null;O=az}}if(ax!==null){ay=[ay,ax]}else{ay=null;O=aA}}else{ay=null;O=aA}if(ay!==null){ay=(function(aE,aC,aD){return an(aC,aD,1,3)})(aB,ay[0],ay[1])}if(ay===null){O=aB}return ay}function D(){var aw,au,at;var ax,av;ax=O;aw=ah();if(aw!==null){aw=(function(az,ay){return ay})(ax,aw)}if(aw===null){O=ax}if(aw===null){ax=O;av=O;if(f.charCodeAt(O)===45){aw="-";O++}else{aw=null;if(ab===0){u('"-"')}}if(aw!==null){au=R();if(au!==null){at=D();if(at!==null){aw=[aw,au,at]}else{aw=null;O=av}}else{aw=null;O=av}}else{aw=null;O=av}if(aw!==null){aw=(function(az,ay){return{type:"*",args:[{type:"number",args:[-1]},ay]}})(ax,aw[2])}if(aw===null){O=ax}}return aw}function ar(){var aw,au,at;var ax,av;ax=O;av=O;if(f.charCodeAt(O)===34){aw='"';O++}else{aw=null;if(ab===0){u('"\\""')}}if(aw!==null){au=[];if(/^[^"]/.test(f.charAt(O))){at=f.charAt(O);O++}else{at=null;if(ab===0){u('[^"]')}}while(at!==null){au.push(at);if(/^[^"]/.test(f.charAt(O))){at=f.charAt(O);O++}else{at=null;if(ab===0){u('[^"]')}}}if(au!==null){if(f.charCodeAt(O)===34){at='"';O++}else{at=null;if(ab===0){u('"\\""')}}if(at!==null){aw=[aw,au,at]}else{aw=null;O=av}}else{aw=null;O=av}}else{aw=null;O=av}if(aw!==null){aw=(function(az,ay){return{type:"string",args:[ay.join("")]}})(ax,aw[1])}if(aw===null){O=ax}if(aw===null){ax=O;av=O;if(f.charCodeAt(O)===39){aw="'";O++}else{aw=null;if(ab===0){u('"\'"')}}if(aw!==null){au=[];if(/^[^']/.test(f.charAt(O))){at=f.charAt(O);O++}else{at=null;if(ab===0){u("[^']")}}while(at!==null){au.push(at);if(/^[^']/.test(f.charAt(O))){at=f.charAt(O);O++}else{at=null;if(ab===0){u("[^']")}}}if(au!==null){if(f.charCodeAt(O)===39){at="'";O++}else{at=null;if(ab===0){u('"\'"')}}if(at!==null){aw=[aw,au,at]}else{aw=null;O=av}}else{aw=null;O=av}}else{aw=null;O=av}if(aw!==null){aw=(function(az,ay){return{type:"string",args:[ay.join("")]}})(ax,aw[1])}if(aw===null){O=ax}}return aw}function ao(){var ax,av,at;var ay,aw,au;ay=O;aw=O;ax=aj();if(ax!==null){au=O;if(f.charCodeAt(O)===46){av=".";O++}else{av=null;if(ab===0){u('"."')}}if(av!==null){at=aj();at=at!==null?at:"";if(at!==null){av=[av,at]}else{av=null;O=au}}else{av=null;O=au}av=av!==null?av:"";if(av!==null){ax=[ax,av]}else{ax=null;O=aw}}else{ax=null;O=aw}if(ax!==null){ax=(function(aB,aA,az){return{type:"number",args:[(az)?parseFloat(aA+"."+az[1]):parseInt(aA)]}})(ay,ax[0],ax[1])}if(ax===null){O=ay}if(ax===null){ay=O;aw=O;if(f.charCodeAt(O)===46){ax=".";O++}else{ax=null;if(ab===0){u('"."')}}if(ax!==null){av=aj();if(av!==null){ax=[ax,av]}else{ax=null;O=aw}}else{ax=null;O=aw}if(ax!==null){ax=(function(aA,az){return{type:"number",args:[parseFloat("."+az)]}})(ay,ax[1])}if(ax===null){O=ay}}return ax}function aj(){var au,at;var av;av=O;if(/^[0-9]/.test(f.charAt(O))){at=f.charAt(O);O++}else{at=null;if(ab===0){u("[0-9]")}}if(at!==null){au=[];while(at!==null){au.push(at);if(/^[0-9]/.test(f.charAt(O))){at=f.charAt(O);O++}else{at=null;if(ab===0){u("[0-9]")}}}}else{au=null}if(au!==null){au=(function(ax,aw){return aw.join("")})(av,au)}if(au===null){O=av}return au}function ag(){var at;if(f.charCodeAt(O)===42){at="*";O++}else{at=null;if(ab===0){u('"*"')}}return at}function m(){var av,at;var aw,au;aw=O;au=O;av=ad();if(av!==null){at=(function(az,ax){var ay;if(X.args[0]===null){for(ay=0;ay<ac.length;ay++){if(X.args[1]==ac[ay]){return false}}}return true})(O,av)?"":null;if(at!==null){av=[av,at]}else{av=null;O=au}}else{av=null;O=au}if(av!==null){av=(function(ay,ax){(ax.args[0]==="")?ax={type:ax.type,args:[null,ax.args[1]]}:Z(ax.args[0]);return ax})(aw,av[0])}if(av===null){O=aw}return av}function Q(){var av,at;var aw,au;aw=O;au=O;if(f.charCodeAt(O)===36){av="$";O++}else{av=null;if(ab===0){u('"$"')}}if(av!==null){at=ad();if(at!==null){av=[av,at]}else{av=null;O=au}}else{av=null;O=au}if(av!==null){av=(function(ay,ax){Z(ax.args[0]);return{type:"$",args:[ax]}})(aw,av[1])}if(av===null){O=aw}return av}function V(){var aw,au,at;var ax,av;ax=O;if(f.charCodeAt(O)===42){aw="*";O++}else{aw=null;if(ab===0){u('"*"')}}if(aw!==null){aw=(function(ay){return{type:"name",args:[null,null]}})(ax)}if(aw===null){O=ax}if(aw===null){ax=O;av=O;aw=K();if(aw!==null){if(f.charCodeAt(O)===58){au=":";O++}else{au=null;if(ab===0){u('":"')}}if(au!==null){if(f.charCodeAt(O)===42){at="*";O++}else{at=null;if(ab===0){u('"*"')}}if(at!==null){aw=[aw,au,at]}else{aw=null;O=av}}else{aw=null;O=av}}else{aw=null;O=av}if(aw!==null){aw=(function(az,ay){Z(ay);return{type:"name",args:[ay,null]}})(ax,aw[0])}if(aw===null){O=ax}if(aw===null){ax=O;aw=ad();if(aw!==null){aw=(function(az,ay){Z(ay.args[0]);return ay})(ax,aw)}if(aw===null){O=ax}}}return aw}function aq(){var at;if(f.substr(O,7)==="comment"){at="comment";O+=7}else{at=null;if(ab===0){u('"comment"')}}if(at===null){if(f.substr(O,4)==="text"){at="text";O+=4}else{at=null;if(ab===0){u('"text"')}}if(at===null){if(f.substr(O,22)==="processing-instruction"){at="processing-instruction";O+=22}else{at=null;if(ab===0){u('"processing-instruction"')}}if(at===null){if(f.substr(O,4)==="node"){at="node";O+=4}else{at=null;if(ab===0){u('"node"')}}}}}return at}function W(){var au,at;if(/^[ \t\r\n]/.test(f.charAt(O))){at=f.charAt(O);O++}else{at=null;if(ab===0){u("[ \\t\\r\\n]")}}if(at!==null){au=[];while(at!==null){au.push(at);if(/^[ \t\r\n]/.test(f.charAt(O))){at=f.charAt(O);O++}else{at=null;if(ab===0){u("[ \\t\\r\\n]")}}}}else{au=null}return au}function R(){var at;at=W();at=at!==null?at:"";return at}function ad(){var at;var au;au=O;at=B();if(at===null){at=x()}if(at!==null){at=(function(aw,av){X=av;return av})(au,at)}if(at===null){O=au}return at}function B(){var aw,au,at;var ax,av;ax=O;av=O;aw=K();if(aw!==null){if(f.charCodeAt(O)===58){au=":";O++}else{au=null;if(ab===0){u('":"')}}if(au!==null){at=K();if(at!==null){aw=[aw,au,at]}else{aw=null;O=av}}else{aw=null;O=av}}else{aw=null;O=av}if(aw!==null){aw=(function(aA,az,ay){return{type:"name",args:[az,ay]}})(ax,aw[0],aw[2])}if(aw===null){O=ax}return aw}function x(){var at;var au;au=O;at=K();if(at!==null){at=(function(aw,av){return{type:"name",args:[null,av]}})(au,at)}if(at===null){O=au}return at}function K(){var at;at=g();return at}function E(){var at;if(/^[A-Z]/.test(f.charAt(O))){at=f.charAt(O);O++}else{at=null;if(ab===0){u("[A-Z]")}}if(at===null){if(f.charCodeAt(O)===95){at="_";O++}else{at=null;if(ab===0){u('"_"')}}if(at===null){if(/^[a-z]/.test(f.charAt(O))){at=f.charAt(O);O++}else{at=null;if(ab===0){u("[a-z]")}}if(at===null){if(/^[\xC0-\xD6]/.test(f.charAt(O))){at=f.charAt(O);O++}else{at=null;if(ab===0){u("[\\xC0-\\xD6]")}}if(at===null){if(/^[\xD8-\xF6]/.test(f.charAt(O))){at=f.charAt(O);O++}else{at=null;if(ab===0){u("[\\xD8-\\xF6]")}}if(at===null){if(/^[\xF8-\u02FF]/.test(f.charAt(O))){at=f.charAt(O);O++}else{at=null;if(ab===0){u("[\\xF8-\\u02FF]")}}if(at===null){if(/^[\u0370-\u037D]/.test(f.charAt(O))){at=f.charAt(O);O++}else{at=null;if(ab===0){u("[\\u0370-\\u037D]")}}if(at===null){if(/^[\u037F-\u1FFF]/.test(f.charAt(O))){at=f.charAt(O);O++}else{at=null;if(ab===0){u("[\\u037F-\\u1FFF]")}}if(at===null){if(/^[\u200C-\u200D]/.test(f.charAt(O))){at=f.charAt(O);O++}else{at=null;if(ab===0){u("[\\u200C-\\u200D]")}}if(at===null){if(/^[\u2070-\u218F]/.test(f.charAt(O))){at=f.charAt(O);O++}else{at=null;if(ab===0){u("[\\u2070-\\u218F]")}}if(at===null){if(/^[\u2C00-\u2FEF]/.test(f.charAt(O))){at=f.charAt(O);O++}else{at=null;if(ab===0){u("[\\u2C00-\\u2FEF]")}}if(at===null){if(/^[\u3001-\uD7FF]/.test(f.charAt(O))){at=f.charAt(O);O++}else{at=null;if(ab===0){u("[\\u3001-\\uD7FF]")}}if(at===null){if(/^[\uF900-\uFDCF]/.test(f.charAt(O))){at=f.charAt(O);O++}else{at=null;if(ab===0){u("[\\uF900-\\uFDCF]")}}if(at===null){if(/^[\uFDF0-\uFFFD]/.test(f.charAt(O))){at=f.charAt(O);O++}else{at=null;if(ab===0){u("[\\uFDF0-\\uFFFD]")}}}}}}}}}}}}}}}return at}function t(){var at;at=E();if(at===null){if(f.charCodeAt(O)===45){at="-";O++}else{at=null;if(ab===0){u('"-"')}}if(at===null){if(f.charCodeAt(O)===46){at=".";O++}else{at=null;if(ab===0){u('"."')}}if(at===null){if(/^[0-9]/.test(f.charAt(O))){at=f.charAt(O);O++}else{at=null;if(ab===0){u("[0-9]")}}if(at===null){if(/^[\xB7]/.test(f.charAt(O))){at=f.charAt(O);O++}else{at=null;if(ab===0){u("[\\xB7]")}}if(at===null){if(/^[\u0300-\u036F]/.test(f.charAt(O))){at=f.charAt(O);O++}else{at=null;if(ab===0){u("[\\u0300-\\u036F]")}}if(at===null){if(/^[\u203F-\u2040]/.test(f.charAt(O))){at=f.charAt(O);O++}else{at=null;if(ab===0){u("[\\u203F-\\u2040]")}}}}}}}}return at}function g(){var aw,au,at;var ax,av;ax=O;av=O;aw=E();if(aw!==null){au=[];at=t();while(at!==null){au.push(at);at=t()}if(au!==null){aw=[aw,au]}else{aw=null;O=av}}else{aw=null;O=av}if(aw!==null){aw=(function(aA,ay,az){return ay+az.join("")})(ax,aw[0],aw[1])}if(aw===null){O=ax}return aw}function I(av){av.sort();var aw=null;var au=[];for(var at=0;at<av.length;at++){if(av[at]!==aw){au.push(av[at]);aw=av[at]}}return au}function J(){var at=1;var aw=1;var ax=false;for(var au=0;au<Math.max(O,h);au++){var av=f.charAt(au);if(av==="\n"){if(!ax){at++}aw=1;ax=false}else{if(av==="\r"||av==="\u2028"||av==="\u2029"){at++;aw=1;ax=true}else{aw++;ax=false}}}return{line:at,column:aw}}var an=function(az,ax,au,ay){var aw,av,at={type:"",args:[]};at.args.push(az);for(aw=0;aw<ax.length;aw++){switch(typeof au){case"string":at.type=au;break;case"object":at.type=ax[aw][au[0]];for(av=1;av<au.length;av++){at.type=at.type[au[av]]}break;default:at.type=ax[aw][au];break}at.args.push((typeof ay=="undefined")?ax[aw]:ax[aw][ay]);at={type:"",args:[at]}}return at.args[0]},j=function(aw,av,at,ax){var au=[];if(at.length<1){return aw}for(i=0;i<at.length;i++){au.push(at[i][ax])}return{type:"predicate",args:[av,aw,au]}},P=[],Z=function(au){var at,av=false;if(au===null){return}for(at=0;at<P.length;at++){if(P[at]===au){av=true;break}}if(!av){P.push(au)}},X,ac=["comment","text","processing-instruction","node"],ap=function(au,av,at){if(au=="/"){return{type:"/",args:[av,at]}}return{type:"/",args:[{type:"/",args:[av,{type:"step",args:["descendant-or-self",{type:"nodeType",args:["node",[]]}]}]},at]}};var A=e[q]();if(A===null||O!==f.length){var S=Math.max(O,h);var l=S<f.length?f.charAt(S):null;var aa=J();throw new this.SyntaxError(I(s),l,S,aa.line,aa.column)}return A},toSource:function(){return this._source}};a.SyntaxError=function(f,g,h,d,e){function c(l,m){var j,k;switch(l.length){case 0:j="end of input";break;case 1:j=l[0];break;default:j=l.slice(0,l.length-1).join(", ")+" or "+l[l.length-1]}k=m?b(m):"end of input";return"Expected "+j+" but "+k+" found."}this.name="SyntaxError";this.expected=f;this.found=g;this.message=c(f,g);this.offset=h;this.line=d;this.column=e};a.SyntaxError.prototype=Error.prototype;return a})();